# 中文数字转换库测试文档

## 测试概览
本测试套件为 `cn-nm` 库提供全面的测试覆盖，包括正常场景和异常场景的测试用例。

## 测试结构

### 1. `toCn` 函数测试（数字转中文）

#### 正常场景测试：
- **单个数字转换**：0-9 的基本数字转换
- **两位数转换**：10-99 的数字转换，包括整十和非整十
- **三位数转换**：100-999 的数字转换，包含零的处理
- **四位数转换**：1000-9999 的数字转换
- **万级数字转换**：10000-999999 的数字转换
- **亿级数字转换**：100000000 以上的大数字转换
- **小数转换**：带小数点的数字转换
- **字符串数字转换**：字符串格式数字的转换
- **整数形式浮点数**：如 1.0, 10.00 等的处理

#### 异常和边界场景测试：
- **无效输入**：null, undefined, 空字符串, 非数字字符串, 对象, 数组, NaN, Infinity
- **负数处理**：负数的处理方式
- **特殊数字格式**：前导零、多余小数位等
- **科学计数法**：科学计数法数字的处理
- **极大数字**：超大数字的处理能力
- **特殊字符**：包含空格或其他字符的字符串

### 2. `toNm` 函数测试（中文转数字）

#### 正常场景测试：
- **单个中文数字转换**：零到玖的基本转换
- **两位中文数字转换**：十位数的中文转换
- **三位中文数字转换**：百位数的中文转换
- **四位中文数字转换**：千位数的中文转换
- **万级中文数字转换**：万位以上的中文转换
- **亿级中文数字转换**：亿位以上的中文转换
- **中文小数转换**：带"点"的小数转换

#### 异常和边界场景测试：
- **无效输入**：非中文、数字、空值等输入
- **只有零的情况**：单独或多个"零"的处理
- **不完整的中文数字**：只有单位没有数字的情况
- **混合无效字符**：中文数字混合其他字符
- **重复的单位**：重复单位的错误格式
- **单位顺序错误**：单位顺序不正确的情况
- **包含空格**：含有空格的输入

### 3. 双向转换一致性测试
- **数字→中文→数字**：验证往返转换的一致性
- **带小数的双向转换**：小数的往返转换验证
- **特殊数字双向转换**：边界值的往返转换

### 4. 性能和压力测试
- **大量转换操作性能**：批量转换的性能测试
- **超大数字处理**：极大数字的处理能力测试

### 5. 内部函数测试
- **格式化功能**：数字格式化逻辑的间接测试
- **数字分割功能**：内部分割逻辑的验证

## 运行测试

```bash
# 安装依赖
npm install

# 运行所有测试
npm test

# 监视模式运行测试
npm run test:watch

# 运行测试并生成覆盖率报告
npm run test:coverage
```

## 测试覆盖场景

### 覆盖的正常使用场景：
✅ 基本数字转换（0-9）  
✅ 多位数转换（两位、三位、四位）  
✅ 大数字转换（万、亿级别）  
✅ 小数转换  
✅ 字符串数字转换  
✅ 中文数字到阿拉伯数字转换  
✅ 双向转换一致性验证  

### 覆盖的异常场景：
✅ 无效输入处理  
✅ 空值和 null 处理  
✅ 非数字字符串处理  
✅ 负数处理  
✅ 特殊数字格式处理  
✅ 边界值处理  
✅ 格式错误的中文数字处理  
✅ 性能极限测试  

## 注意事项

1. **模块导入**：测试文件中的模块导入方式需要根据实际的构建配置调整
2. **Jest 配置**：已在 package.json 中配置了 Jest 的基本设置
3. **覆盖率要求**：测试应覆盖所有主要功能和边界情况
4. **性能要求**：性能测试确保在合理时间内完成大量操作

## 扩展测试建议

如需进一步扩展测试，可考虑添加：
- 国际化测试（不同地区的数字表示）
- 更多边界值测试
- 内存泄漏测试
- 并发测试
- 兼容性测试（不同 JavaScript 引擎）